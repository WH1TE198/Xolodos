import sqlite3
from contextlib import closing

DB_PATH = "app.db"

def _conn():
    return sqlite3.connect(DB_PATH)

def init_recipes_db():
    """Создаёт таблицы под рецепты/ингредиенты."""
    with _conn() as conn, closing(conn.cursor()) as c:
        c.execute("""
            CREATE TABLE IF NOT EXISTS recipes (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                title TEXT NOT NULL,
                steps TEXT,            -- можно хранить текст или markdown
                time_min INTEGER,      -- время приготовления (мин)
                difficulty TEXT        -- 'легко' / 'средне' / 'сложно'
            )
        """)
        c.execute("""
            CREATE TABLE IF NOT EXISTS recipe_ingredients (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                recipe_id INTEGER NOT NULL,
                name TEXT NOT NULL,    -- название ингредиента
                qty REAL,              -- количество (необязательно)
                unit TEXT,             -- ед. изм. (г, мл, шт, ...)
                FOREIGN KEY (recipe_id) REFERENCES recipes(id) ON DELETE CASCADE
            )
        """)
        conn.commit()

def add_recipe(title: str, steps: str, ingredients: list, time_min: int | None = None, difficulty: str | None = None) -> int:
    """Добавляет рецепт и его ингредиенты. Ingredients — список словарей: {'name':..., 'qty':..., 'unit':...}"""
    with _conn() as conn, closing(conn.cursor()) as c:
        c.execute(
            "INSERT INTO recipes(title, steps, time_min, difficulty) VALUES(?,?,?,?)",
            (title, steps, time_min, difficulty)
        )
        rid = c.lastrowid
        if ingredients:
            c.executemany(
                "INSERT INTO recipe_ingredients(recipe_id, name, qty, unit) VALUES(?,?,?,?)",
                [(rid, i.get("name"), i.get("qty"), i.get("unit")) for i in ingredients]
            )
        conn.commit()
        return rid

def get_all_recipes() -> list[dict]:
    """Возвращает список рецептов с вложенными ингредиентами."""
    with _conn() as conn, closing(conn.cursor()) as c:
        rows = c.execute("SELECT id, title, steps, time_min, difficulty FROM recipes").fetchall()
        data = []
        for (rid, title, steps, tm, diff) in rows:
            ings = c.execute(
                "SELECT name, qty, unit FROM recipe_ingredients WHERE recipe_id=?",
                (rid,)
            ).fetchall()
            data.append({
                "id": rid,
                "title": title,
                "steps": steps or "",
                "time_min": tm,
                "difficulty": diff,
                "ingredients": [{"name": n, "qty": q, "unit": u} for (n, q, u) in ings],
            })
        return data

def seed_demo_if_empty():
    with _conn() as conn, closing(conn.cursor()) as c:
        cnt = c.execute("SELECT COUNT(*) FROM recipes").fetchone()[0]
    if cnt > 0:
        return
    add_recipe(
        "Омлет с сыром",
        "Взбить яйца, добавить соль, перец. Обжарить на сковороде, посыпать сыром, сложить пополам.",
        [{"name": "яйца", "qty": 3, "unit": "шт"},
         {"name": "сыр", "qty": 50, "unit": "г"},
         {"name": "молоко", "qty": 30, "unit": "мл"}],
        time_min=10, difficulty="легко"
    )
    add_recipe(
        "Салат греческий",
        "Нарезать помидоры, огурцы, перец, лук, фету; добавить маслины, оливковое масло.",
        [{"name": "помидоры", "qty": 2, "unit": "шт"},
         {"name": "огурец", "qty": 1, "unit": "шт"},
         {"name": "сыр фета", "qty": 100, "unit": "г"},
         {"name": "маслины", "qty": 10, "unit": "шт"}],
        time_min=12, difficulty="легко"
    )
    add_recipe(
        "Паста с томатным соусом",
        "Сварить пасту аль денте. Соус: пассеровать чеснок, добавить томаты, уварить, смешать с пастой.",
        [{"name": "паста", "qty": 200, "unit": "г"},
         {"name": "томаты", "qty": 300, "unit": "г"},
         {"name": "чеснок", "qty": 2, "unit": "зубчик"}],
        time_min=20, difficulty="средне"
    )

def _has_recipe(title: str) -> bool:
    with _conn() as conn, closing(conn.cursor()) as c:
        row = c.execute("SELECT 1 FROM recipes WHERE title = ? LIMIT 1", (title,)).fetchone()
        return row is not None

def add_recipe_if_absent(title, steps, ingredients, time_min=None, difficulty=None):
    if not _has_recipe(title):
        return add_recipe(title, steps, ingredients, time_min, difficulty)
    return None

def seed_world_recipes() -> int:
    added = 0
    def put(title, steps, ings, time_min=None, difficulty=None):
        nonlocal added
        rid = add_recipe_if_absent(title, steps, ings, time_min, difficulty)
        if rid:
            added += 1

    put(
        "Пицца Маргарита",
        "Тесто, томатный соус, сверху сыр моцарелла и базилик. Выпекать до румяности.",
        [
            {"name": "томаты", "qty": 300, "unit": "г"},
            {"name": "сыр моцарелла", "qty": 150, "unit": "г"},
            {"name": "мука", "qty": 300, "unit": "г"},
            {"name": "дрожжи", "qty": 7, "unit": "г"},
            {"name": "базилик", "qty": 1, "unit": "пучок"},
            {"name": "оливковое масло", "qty": 2, "unit": "ст.л."},
        ],
        time_min=30, difficulty="средне"
    )

    put(
        "Спагетти Карбонара",
        "Отварить пасту. Обжарить бекон, смешать с яйцами и сыром. Перемешать с пастой.",
        [
            {"name": "паста", "qty": 250, "unit": "г"},
            {"name": "яйца", "qty": 2, "unit": "шт"},
            {"name": "сыр", "qty": 60, "unit": "г"},
            {"name": "бекон", "qty": 120, "unit": "г"},
            {"name": "чеснок", "qty": 1, "unit": "зубчик"},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Пад тай",
        "Обжарить рисовую лапшу с курицей/креветками, яйцом, арахисом, лаймом и соусом.",
        [
            {"name": "рисовая лапша", "qty": 200, "unit": "г"},
            {"name": "куриное филе", "qty": 200, "unit": "г"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "арахис", "qty": 30, "unit": "г"},
            {"name": "лайм", "qty": 1, "unit": "шт"},
            {"name": "соевый соус", "qty": 2, "unit": "ст.л."},
        ],
        time_min=25, difficulty="средне"
    )

    put(
        "Фо бо",
        "Говяжий бульон, рисовая лапша, говядина, зелень, лайм. Подача с соусами.",
        [
            {"name": "говядина", "qty": 250, "unit": "г"},
            {"name": "рисовая лапша", "qty": 200, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "лайм", "qty": 1, "unit": "шт"},
            {"name": "зелень", "qty": 1, "unit": "пучок"},
        ],
        time_min=40, difficulty="средне"
    )

    put(
        "Рамен шою",
        "Куриный/свиной бульон, лапша, соевый соус, яйцо, зелёный лук.",
        [
            {"name": "куриный бульон", "qty": 1, "unit": "л"},
            {"name": "лапша", "qty": 200, "unit": "г"},
            {"name": "соевый соус", "qty": 3, "unit": "ст.л."},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "зелёный лук", "qty": 1, "unit": "пучок"},
        ],
        time_min=35, difficulty="средне"
    )

    put(
        "Том ям",
        "Кисло-острый суп с креветками, грибами, лаймом и пастой том ям.",
        [
            {"name": "креветки", "qty": 250, "unit": "г"},
            {"name": "грибы", "qty": 150, "unit": "г"},
            {"name": "лайм", "qty": 1, "unit": "шт"},
            {"name": "кокосовое молоко", "qty": 200, "unit": "мл"},
            {"name": "чили", "qty": 1, "unit": "шт"},
        ],
        time_min=25, difficulty="средне"
    )

    put(
        "Паэлья",
        "Обжарить рис с шафраном, добавить бульон, морепродукты/курицу и овощи, довести.",
        [
            {"name": "рис", "qty": 300, "unit": "г"},
            {"name": "куриное филе", "qty": 200, "unit": "г"},
            {"name": "креветки", "qty": 200, "unit": "г"},
            {"name": "перец", "qty": 1, "unit": "шт"},
            {"name": "томаты", "qty": 200, "unit": "г"},
        ],
        time_min=45, difficulty="средне"
    )

    put(
        "Шакшука",
        "Томаты с луком и специями тушить, сделать лунки, добавить яйца и довести до готовности.",
        [
            {"name": "томаты", "qty": 400, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "чеснок", "qty": 2, "unit": "зубчик"},
            {"name": "яйца", "qty": 3, "unit": "шт"},
            {"name": "перец", "qty": 0.5, "unit": "шт"},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Хумус",
        "Измельчить нут с тахини, лимоном, чесноком и оливковым маслом до пасты.",
        [
            {"name": "нут", "qty": 250, "unit": "г"},
            {"name": "тахини", "qty": 2, "unit": "ст.л."},
            {"name": "лимон", "qty": 0.5, "unit": "шт"},
            {"name": "чеснок", "qty": 1, "unit": "зубчик"},
            {"name": "оливковое масло", "qty": 2, "unit": "ст.л."},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Салат Цезарь",
        "Салат ромэн, сухарики, пармезан, заправка на основе яйца/анчоуса/масла.",
        [
            {"name": "листья салата", "qty": 1, "unit": "кочан"},
            {"name": "сыр", "qty": 50, "unit": "г"},
            {"name": "батон", "qty": 4, "unit": "ломтик"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "анчоусы", "qty": 4, "unit": "шт"},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Тако",
        "Обжарить мясо со специями, подать в тортильях с овощами и соусом.",
        [
            {"name": "говядина", "qty": 250, "unit": "г"},
            {"name": "тортильи", "qty": 4, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "томаты", "qty": 150, "unit": "г"},
            {"name": "перец", "qty": 1, "unit": "шт"},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Фиш-н-чипс",
        "Филе белой рыбы в кляре обжарить во фритюре. Подача с картофелем фри.",
        [
            {"name": "рыба", "qty": 300, "unit": "г"},
            {"name": "картофель", "qty": 400, "unit": "г"},
            {"name": "мука", "qty": 120, "unit": "г"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "масло растительное", "qty": 400, "unit": "мл"},
        ],
        time_min=30, difficulty="средне"
    )

    return added

# ✅ ВАЖНО: имя функции должно быть seed_more_world_recipes (как импортируешь)
def seed_more_world_recipes() -> int:
    """
    Ещё набор популярных рецептов мира. Добавляет только те, которых нет.
    Возвращает число добавленных.
    """
    added = 0

    def put(title, steps, ings, time_min=None, difficulty=None):
        nonlocal added
        rid = add_recipe_if_absent(title, steps, ings, time_min, difficulty)
        if rid:
            added += 1

    # --- твой прежний набор (1..15) ---
    put(
        "Лазанья болоньезе",
        "Слой листов лазаньи, соус болоньезе, соус бешамель и сыр. Запекать до румяности.",
        [
            {"name": "фарш говяжий", "qty": 400, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "чеснок", "qty": 2, "unit": "зубчик"},
            {"name": "томаты", "qty": 400, "unit": "г"},
            {"name": "листы лазаньи", "qty": 9, "unit": "шт"},
            {"name": "молоко", "qty": 400, "unit": "мл"},
            {"name": "мука", "qty": 2, "unit": "ст.л."},
            {"name": "масло сливочное", "qty": 40, "unit": "г"},
            {"name": "сыр", "qty": 120, "unit": "г"},
        ],
        time_min=60, difficulty="средне"
    )

    put(
        "Ризотто с грибами",
        "Обжарить рис арборио с луком, подливать бульон, добавить грибы и сыр.",
        [
            {"name": "рис", "qty": 300, "unit": "г"},
            {"name": "грибы", "qty": 250, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "масло сливочное", "qty": 40, "unit": "г"},
            {"name": "куриный бульон", "qty": 1, "unit": "л"},
            {"name": "сыр", "qty": 60, "unit": "г"},
        ],
        time_min=35, difficulty="средне"
    )

    put(
        "Борщ",
        "Сварить бульон. Обжарить свёклу, морковь, лук, добавить капусту и картофель, томаты.",
        [
            {"name": "говядина", "qty": 400, "unit": "г"},
            {"name": "свёкла", "qty": 1, "unit": "шт"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "картофель", "qty": 3, "unit": "шт"},
            {"name": "капуста", "qty": 300, "unit": "г"},
            {"name": "томаты", "qty": 200, "unit": "г"},
        ],
        time_min=70, difficulty="средне"
    )

    put(
        "Плов",
        "Обжарить мясо с луком и морковью, добавить рис, специи и воду. Томить до готовности.",
        [
            {"name": "рис", "qty": 400, "unit": "г"},
            {"name": "говядина", "qty": 500, "unit": "г"},
            {"name": "лук", "qty": 2, "unit": "шт"},
            {"name": "морковь", "qty": 2, "unit": "шт"},
            {"name": "чеснок", "qty": 1, "unit": "головка"},
            {"name": "масло растительное", "qty": 80, "unit": "мл"},
        ],
        time_min=60, difficulty="средне"
    )

    put(
        "Чили кон карне",
        "Обжарить фарш, добавить фасоль, томаты, кукурузу, специи. Тушить до густоты.",
        [
            {"name": "фарш говяжий", "qty": 400, "unit": "г"},
            {"name": "фасоль", "qty": 300, "unit": "г"},
            {"name": "кукуруза", "qty": 150, "unit": "г"},
            {"name": "томаты", "qty": 400, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "чили", "qty": 1, "unit": "шт"},
        ],
        time_min=35, difficulty="легко"
    )

    put(
        "Минестроне",
        "Томатный овощной суп с фасолью и пастой. Варить до мягкости овощей.",
        [
            {"name": "томаты", "qty": 400, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "сельдерей", "qty": 1, "unit": "стебель"},
            {"name": "фасоль", "qty": 200, "unit": "г"},
            {"name": "паста", "qty": 80, "unit": "г"},
        ],
        time_min=30, difficulty="легко"
    )

    put(
        "Курица терияки",
        "Обжарить курицу, добавить соус терияки, подать с рисом и зелёным луком.",
        [
            {"name": "куриное филе", "qty": 350, "unit": "г"},
            {"name": "соевый соус", "qty": 3, "unit": "ст.л."},
            {"name": "рис", "qty": 200, "unit": "г"},
            {"name": "зелёный лук", "qty": 1, "unit": "пучок"},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Гаспачо",
        "Холодный суп: измельчить томаты, огурец, перец, лук, чеснок, масло и уксус.",
        [
            {"name": "томаты", "qty": 600, "unit": "г"},
            {"name": "огурец", "qty": 1, "unit": "шт"},
            {"name": "перец", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 0.5, "unit": "шт"},
            {"name": "чеснок", "qty": 1, "unit": "зубчик"},
            {"name": "оливковое масло", "qty": 2, "unit": "ст.л."},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Сырный крем-суп",
        "Обжарить лук, добавить картофель и бульон. Взбить, вмешать сливки и сыр.",
        [
            {"name": "картофель", "qty": 400, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "куриный бульон", "qty": 800, "unit": "мл"},
            {"name": "сливки", "qty": 150, "unit": "мл"},
            {"name": "сыр", "qty": 120, "unit": "г"},
        ],
        time_min=30, difficulty="легко"
    )

    put(
        "Куриный суп-лапша",
        "Бульон с курицей, лапшой, морковью и зеленью. Варить до готовности.",
        [
            {"name": "куриное филе", "qty": 300, "unit": "г"},
            {"name": "куриный бульон", "qty": 1, "unit": "л"},
            {"name": "лапша", "qty": 120, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "зелень", "qty": 1, "unit": "пучок"},
        ],
        time_min=30, difficulty="легко"
    )

    put(
        "Бургеры классические",
        "Сформовать котлеты, обжарить. Собрать с булочкой, сыром и овощами.",
        [
            {"name": "фарш говяжий", "qty": 400, "unit": "г"},
            {"name": "булочки", "qty": 4, "unit": "шт"},
            {"name": "сыр", "qty": 4, "unit": "ломтик"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "огурец", "qty": 1, "unit": "шт"},
            {"name": "томатный соус", "qty": 2, "unit": "ст.л."},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Шаверма куриная",
        "Обжарить курицу со специями, завернуть в лаваш с овощами и соусом.",
        [
            {"name": "куриное филе", "qty": 350, "unit": "г"},
            {"name": "лаваш", "qty": 2, "unit": "шт"},
            {"name": "огурец", "qty": 1, "unit": "шт"},
            {"name": "томаты", "qty": 2, "unit": "шт"},
            {"name": "чеснок", "qty": 1, "unit": "зубчик"},
            {"name": "йогурт", "qty": 150, "unit": "г"},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Суши-ролл Калифорния",
        "Приготовить рис для суши, завернуть с нори, крабом/краб-палочками, авокадо и огурцом.",
        [
            {"name": "рис", "qty": 250, "unit": "г"},
            {"name": "нори", "qty": 4, "unit": "лист"},
            {"name": "огурец", "qty": 1, "unit": "шт"},
            {"name": "крабовые палочки", "qty": 150, "unit": "г"},
            {"name": "майонез", "qty": 2, "unit": "ст.л."},
            {"name": "соевый соус", "qty": 2, "unit": "ст.л."},
        ],
        time_min=40, difficulty="средне"
    )

    put(
        "Панкейки",
        "Смешать яйцо, молоко, муку, разрыхлитель, сахар. Жарить небольшими кружками.",
        [
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "молоко", "qty": 250, "unit": "мл"},
            {"name": "мука", "qty": 180, "unit": "г"},
            {"name": "сахар", "qty": 1.5, "unit": "ст.л."},
            {"name": "разрыхлитель", "qty": 1, "unit": "ч.л."},
            {"name": "масло сливочное", "qty": 30, "unit": "г"},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Тирамису",
        "Выложить слоями савоярди, крем из маскарпоне и кофе. Охладить и присыпать какао.",
        [
            {"name": "печенье савоярди", "qty": 200, "unit": "г"},
            {"name": "маскарпоне", "qty": 250, "unit": "г"},
            {"name": "сливки", "qty": 200, "unit": "мл"},
            {"name": "кофе", "qty": 150, "unit": "мл"},
            {"name": "какао", "qty": 1, "unit": "ст.л."},
        ],
        time_min=30, difficulty="легко"
    )

    # --- ДОБАВЛЕНО ЕЩЁ МНОГО (16..34) ---
    put(
        "Овсянка с бананом",
        "Сварить овсянку на воде/молоке, добавить банан и мёд. Можно посыпать орехами.",
        [
            {"name": "овсянка", "qty": 60, "unit": "г"},
            {"name": "молоко", "qty": 250, "unit": "мл"},
            {"name": "банан", "qty": 1, "unit": "шт"},
            {"name": "мёд", "qty": 1, "unit": "ч.л."},
        ],
        time_min=10, difficulty="легко"
    )

    put(
        "Тосты с авокадо",
        "Поджарить хлеб, размять авокадо с солью и лимоном, намазать и подать.",
        [
            {"name": "хлеб", "qty": 2, "unit": "ломтик"},
            {"name": "авокадо", "qty": 1, "unit": "шт"},
            {"name": "лимон", "qty": 0.5, "unit": "шт"},
        ],
        time_min=10, difficulty="легко"
    )

    put(
        "Сырники",
        "Смешать творог, яйцо, сахар и муку. Сформовать, обжарить до румяности.",
        [
            {"name": "творог", "qty": 400, "unit": "г"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "мука", "qty": 3, "unit": "ст.л."},
            {"name": "сахар", "qty": 1, "unit": "ст.л."},
            {"name": "масло растительное", "qty": 2, "unit": "ст.л."},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Драники",
        "Натереть картофель и лук, добавить яйцо и муку, обжарить небольшими лепёшками.",
        [
            {"name": "картофель", "qty": 500, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "мука", "qty": 2, "unit": "ст.л."},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Жареный рис с овощами",
        "Обжарить овощи, добавить готовый рис и соевый соус, прогреть 3–5 минут.",
        [
            {"name": "рис", "qty": 250, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "перец", "qty": 1, "unit": "шт"},
            {"name": "соевый соус", "qty": 2, "unit": "ст.л."},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Куриные котлеты",
        "Смешать куриный фарш с луком и специями, сформовать котлеты, обжарить/потушить до готовности.",
        [
            {"name": "куриный фарш", "qty": 500, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "хлеб", "qty": 1, "unit": "ломтик"},
        ],
        time_min=30, difficulty="легко"
    )

    put(
        "Рыба в духовке с лимоном",
        "Посолить рыбу, добавить лимон и масло, запечь до готовности.",
        [
            {"name": "рыба", "qty": 400, "unit": "г"},
            {"name": "лимон", "qty": 0.5, "unit": "шт"},
            {"name": "оливковое масло", "qty": 1, "unit": "ст.л."},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Картофельное пюре",
        "Сварить картофель, размять, добавить молоко и сливочное масло, посолить.",
        [
            {"name": "картофель", "qty": 600, "unit": "г"},
            {"name": "молоко", "qty": 120, "unit": "мл"},
            {"name": "масло сливочное", "qty": 30, "unit": "г"},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Гречка с грибами",
        "Сварить гречку. Обжарить грибы с луком. Смешать и прогреть пару минут.",
        [
            {"name": "гречка", "qty": 250, "unit": "г"},
            {"name": "грибы", "qty": 250, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Суп-пюре из тыквы",
        "Тыкву и лук потушить, добавить бульон, пробить блендером, добавить сливки.",
        [
            {"name": "тыква", "qty": 500, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "куриный бульон", "qty": 700, "unit": "мл"},
            {"name": "сливки", "qty": 120, "unit": "мл"},
        ],
        time_min=30, difficulty="легко"
    )

    put(
        "Овощное рагу",
        "Нарезать овощи, тушить под крышкой до мягкости, посолить и приправить.",
        [
            {"name": "кабачок", "qty": 1, "unit": "шт"},
            {"name": "баклажан", "qty": 1, "unit": "шт"},
            {"name": "перец", "qty": 1, "unit": "шт"},
            {"name": "томаты", "qty": 300, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
        ],
        time_min=35, difficulty="легко"
    )

    put(
        "Запечённые овощи",
        "Нарезать овощи, перемешать с маслом и специями, запечь 25–30 минут.",
        [
            {"name": "картофель", "qty": 300, "unit": "г"},
            {"name": "морковь", "qty": 2, "unit": "шт"},
            {"name": "перец", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "оливковое масло", "qty": 2, "unit": "ст.л."},
        ],
        time_min=35, difficulty="легко"
    )

    put(
        "Рисовая каша",
        "Промыть рис, варить с молоком на слабом огне до мягкости, добавить сахар/масло.",
        [
            {"name": "рис", "qty": 80, "unit": "г"},
            {"name": "молоко", "qty": 400, "unit": "мл"},
            {"name": "сахар", "qty": 1, "unit": "ст.л."},
            {"name": "масло сливочное", "qty": 10, "unit": "г"},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Яичница с помидорами",
        "Обжарить помидоры, добавить яйца, посолить, готовить до желаемой прожарки.",
        [
            {"name": "яйца", "qty": 2, "unit": "шт"},
            {"name": "помидоры", "qty": 2, "unit": "шт"},
        ],
        time_min=10, difficulty="легко"
    )

    put(
        "Салат с тунцом",
        "Смешать тунец, яйцо, огурец/кукурузу, заправить йогуртом/майонезом.",
        [
            {"name": "тунец консервированный", "qty": 1, "unit": "банка"},
            {"name": "яйца", "qty": 2, "unit": "шт"},
            {"name": "огурец", "qty": 1, "unit": "шт"},
            {"name": "кукуруза", "qty": 150, "unit": "г"},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Пицца на лаваше",
        "Смазать лаваш соусом, выложить начинку и сыр, запечь 8–10 минут.",
        [
            {"name": "лаваш", "qty": 1, "unit": "шт"},
            {"name": "сыр", "qty": 120, "unit": "г"},
            {"name": "томатный соус", "qty": 2, "unit": "ст.л."},
            {"name": "колбаса", "qty": 120, "unit": "г"},
        ],
        time_min=12, difficulty="легко"
    )

    put(
        "Кесадилья",
        "На тортилью выложить сыр и начинку, накрыть второй, прогреть на сковороде до расплавления.",
        [
            {"name": "тортильи", "qty": 2, "unit": "шт"},
            {"name": "сыр", "qty": 150, "unit": "г"},
            {"name": "куриное филе", "qty": 200, "unit": "г"},
            {"name": "перец", "qty": 1, "unit": "шт"},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Сэндвич с курицей",
        "Собрать хлеб с курицей, сыром и овощами, прогреть на гриле/сковороде.",
        [
            {"name": "хлеб", "qty": 2, "unit": "ломтик"},
            {"name": "куриное филе", "qty": 150, "unit": "г"},
            {"name": "сыр", "qty": 1, "unit": "ломтик"},
            {"name": "листья салата", "qty": 2, "unit": "лист"},
            {"name": "помидоры", "qty": 1, "unit": "шт"},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Печёные яблоки",
        "Удалить сердцевину, добавить мёд/орехи, запечь 15–20 минут до мягкости.",
        [
            {"name": "яблоки", "qty": 3, "unit": "шт"},
            {"name": "мёд", "qty": 2, "unit": "ч.л."},
            {"name": "орехи", "qty": 30, "unit": "г"},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Окрошка на кефире",
        "Нарезать ингредиенты кубиком, смешать, залить кефиром, посолить. Можно добавить зелень.",
        [
            {"name": "кефир", "qty": 700, "unit": "мл"},
            {"name": "огурец", "qty": 2, "unit": "шт"},
            {"name": "картофель", "qty": 3, "unit": "шт"},
            {"name": "яйца", "qty": 3, "unit": "шт"},
            {"name": "колбаса", "qty": 200, "unit": "г"},
            {"name": "зелень", "qty": 1, "unit": "пучок"},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Блины",
        "Смешать молоко, яйца, муку, сахар. Жарить тонкие блины на сковороде.",
        [
            {"name": "молоко", "qty": 500, "unit": "мл"},
            {"name": "яйца", "qty": 2, "unit": "шт"},
            {"name": "мука", "qty": 220, "unit": "г"},
            {"name": "сахар", "qty": 1, "unit": "ст.л."},
            {"name": "масло растительное", "qty": 2, "unit": "ст.л."},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Салат Оливье",
        "Нарезать всё кубиком, смешать и заправить майонезом.",
        [
            {"name": "картофель", "qty": 3, "unit": "шт"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "яйца", "qty": 3, "unit": "шт"},
            {"name": "колбаса", "qty": 250, "unit": "г"},
            {"name": "огурец", "qty": 2, "unit": "шт"},
            {"name": "горошек", "qty": 1, "unit": "банка"},
            {"name": "майонез", "qty": 2, "unit": "ст.л."},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Гуакамоле",
        "Размять авокадо, добавить томаты и лук, сбрызнуть лимоном, посолить.",
        [
            {"name": "авокадо", "qty": 2, "unit": "шт"},
            {"name": "лимон", "qty": 0.5, "unit": "шт"},
            {"name": "томаты", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 0.5, "unit": "шт"},
        ],
        time_min=10, difficulty="легко"
    )

    put(
        "Паста Альфредо",
        "Сварить пасту. На сковороде прогреть сливки с маслом, добавить сыр, смешать с пастой.",
        [
            {"name": "паста", "qty": 250, "unit": "г"},
            {"name": "сливки", "qty": 200, "unit": "мл"},
            {"name": "сыр", "qty": 80, "unit": "г"},
            {"name": "масло сливочное", "qty": 25, "unit": "г"},
            {"name": "чеснок", "qty": 1, "unit": "зубчик"},
        ],
        time_min=20, difficulty="легко"
    )

    put(
        "Курица с картофелем в духовке",
        "Смешать курицу с картофелем, маслом и специями, запечь до готовности.",
        [
            {"name": "куриное филе", "qty": 350, "unit": "г"},
            {"name": "картофель", "qty": 600, "unit": "г"},
            {"name": "оливковое масло", "qty": 2, "unit": "ст.л."},
            {"name": "чеснок", "qty": 2, "unit": "зубчик"},
        ],
        time_min=45, difficulty="легко"
    )

    put(
        "Салат с крабовыми палочками",
        "Нарезать, смешать, заправить майонезом.",
        [
            {"name": "крабовые палочки", "qty": 200, "unit": "г"},
            {"name": "кукуруза", "qty": 150, "unit": "г"},
            {"name": "яйца", "qty": 2, "unit": "шт"},
            {"name": "огурец", "qty": 1, "unit": "шт"},
            {"name": "майонез", "qty": 2, "unit": "ст.л."},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Смузи банановый",
        "Пробить всё блендером до однородности.",
        [
            {"name": "банан", "qty": 1, "unit": "шт"},
            {"name": "йогурт", "qty": 200, "unit": "г"},
            {"name": "молоко", "qty": 150, "unit": "мл"},
            {"name": "мёд", "qty": 1, "unit": "ч.л."},
        ],
        time_min=5, difficulty="легко"
    )

    put(
        "Суп чечевичный",
        "Обжарить лук и морковь, добавить чечевицу и воду/бульон, варить до мягкости, добавить томаты.",
        [
            {"name": "чечевица", "qty": 200, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "томаты", "qty": 200, "unit": "г"},
        ],
        time_min=35, difficulty="легко"
    )

    put(
        "Тушёная капуста",
        "Обжарить лук и морковь, добавить капусту и томаты, тушить до мягкости.",
        [
            {"name": "капуста", "qty": 600, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "томаты", "qty": 200, "unit": "г"},
        ],
        time_min=40, difficulty="легко"
    )

    put(
        "Салат капустный",
        "Нашинковать капусту, натереть морковь, перемешать и заправить маслом.",
        [
            {"name": "капуста", "qty": 400, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "оливковое масло", "qty": 1, "unit": "ст.л."},
        ],
        time_min=10, difficulty="легко"
    )

    put(
        "Картофель по-деревенски",
        "Нарезать дольками, смешать с маслом и паприкой, запечь до румяности.",
        [
            {"name": "картофель", "qty": 700, "unit": "г"},
            {"name": "оливковое масло", "qty": 2, "unit": "ст.л."},
            {"name": "паприка", "qty": 1, "unit": "ч.л."},
        ],
        time_min=40, difficulty="легко"
    )

    put(
        "Рыбные котлеты",
        "Измельчить рыбу, смешать с луком и яйцом, сформовать и обжарить.",
        [
            {"name": "рыба", "qty": 400, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
            {"name": "яйца", "qty": 1, "unit": "шт"},
            {"name": "хлеб", "qty": 1, "unit": "ломтик"},
        ],
        time_min=30, difficulty="легко"
    )

    put(
        "Гречка с курицей",
        "Обжарить курицу с луком, добавить гречку и воду, тушить до готовности.",
        [
            {"name": "гречка", "qty": 250, "unit": "г"},
            {"name": "куриное филе", "qty": 300, "unit": "г"},
            {"name": "лук", "qty": 1, "unit": "шт"},
        ],
        time_min=35, difficulty="легко"
    )

    put(
        "Рис с курицей и овощами",
        "Обжарить курицу и овощи, добавить готовый рис и соевый соус, прогреть.",
        [
            {"name": "рис", "qty": 250, "unit": "г"},
            {"name": "куриное филе", "qty": 250, "unit": "г"},
            {"name": "морковь", "qty": 1, "unit": "шт"},
            {"name": "перец", "qty": 1, "unit": "шт"},
            {"name": "соевый соус", "qty": 2, "unit": "ст.л."},
        ],
        time_min=25, difficulty="легко"
    )

    put(
        "Кекс в кружке",
        "Смешать ингредиенты, готовить в микроволновке 1–2 минуты.",
        [
            {"name": "мука", "qty": 4, "unit": "ст.л."},
            {"name": "какао", "qty": 1, "unit": "ст.л."},
            {"name": "сахар", "qty": 2, "unit": "ст.л."},
            {"name": "молоко", "qty": 6, "unit": "ст.л."},
            {"name": "яйца", "qty": 1, "unit": "шт"},
        ],
        time_min=5, difficulty="легко"
    )

    put(
        "Пельмени со сметаной",
        "Сварить пельмени до готовности и подать со сметаной.",
        [
            {"name": "пельмени", "qty": 400, "unit": "г"},
            {"name": "сметана", "qty": 2, "unit": "ст.л."},
        ],
        time_min=15, difficulty="легко"
    )

    put(
        "Йогурт с ягодами",
        "Смешать йогурт с ягодами и мёдом.",
        [
            {"name": "йогурт", "qty": 200, "unit": "г"},
            {"name": "ягоды", "qty": 120, "unit": "г"},
            {"name": "мёд", "qty": 1, "unit": "ч.л."},
        ],
        time_min=5, difficulty="легко"
    )

    return added
